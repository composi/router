function Router(){let a,b=[],c={};class d{constructor(a,b){this.name=b,this.path=a,this.keys=[],this.fns=[],this.params={},this.pathToRegexp=(a,b,c,d)=>a instanceof RegExp?a:(a instanceof Array&&(a="("+a.join("|")+")"),a=a.concat(d?"":"/?").replace(/\/\(/g,"(?:/").replace(/\+/g,"__plus__").replace(/(\/)?(\.)?:(\w+)(?:(\(.*?\)))?(\?)?/g,function(a,c,d,e,f,g){return b.push({name:e,optional:!!g}),c=c||"",""+(g?"":c)+"(?:"+(g?c:"")+(d||"")+(f||d&&"([^/.]+?)"||"([^/]+?)")+")"+(g||"")}).replace(/([/.])/g,"\\$1").replace(/__plus__/g,"(.+)").replace(/\*/g,"(.*)"),new RegExp("^"+a+"$",c?"":"i")),this.regex=this.pathToRegexp(this.path,this.keys,!1,!1)}addHandler(a){this.fns.push(a)}removeHandler(a){for(let b,d=0,e=this.fns.length;d<e;d++)if(b=this.fns[d],a==b)return void this.fns.splice(d,1)}run(a){for(let b=0,d=this.fns.length;b<d;b++)if(!1===this.fns[b].apply(this,a))return!1;return!0}match(a,b){let c=this.regex.exec(a);if(!c)return!1;for(let d=1,e=c.length;d<e;++d){let a=this.keys[d-1],e="string"==typeof c[d]?decodeURIComponent(c[d]):c[d];a&&(this.params[a.name]=e),b.push(e)}return!0}}const e=a=>{let f=(a,e)=>{c[a]||(c[a]=new d(a,name),b.push(c[a])),c[a].addHandler(e)};Array.isArray(a)?(a.map(a=>{f(a.path,a.action)}),e.reload()):console.error("Composi router expects an array of objects with path and action properties.")};e.remove=(a,b)=>{let d=c[a];d&&(b?d.removeHandler(b):delete c[a])},e.removeAll=()=>{c={},b=[],a=""},e.navigate=a=>{window.location.hash=a};const f=()=>window.location.hash.substring(1),g=(a,b)=>{let c=[];return b.match(a,c)?!1===b.run(c)?0:1:-1},h=e.reload=()=>{let c=f();for(let d=0,f=b.length;d<f;d++){let f=b[d],h=g(c,f);if(1===h){a=c;break}else if(0===h){e.navigate(a);break}}};return window.addEventListener("hashchange",h,!1),a=f(),window.router=e,e};
//# sourceMappingURL=router.js.map
